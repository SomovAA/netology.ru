# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é ¬´Kubernetes. –ü—Ä–∏—á–∏–Ω—ã –ø–æ—è–≤–ª–µ–Ω–∏—è. –ö–æ–º–∞–Ω–¥–∞ kubectl¬ª

### –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kubernetes. –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Ä–∞–±–æ—á–µ–π –º–∞—à–∏–Ω–µ –∏–ª–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ MicroK8S.

------

### –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é

1. –õ–∏—á–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä —Å –û–° Linux –∏–ª–∏ MacOS 

–∏–ª–∏

2. –í–ú c –û–° Linux –≤ –æ–±–ª–∞–∫–µ –ª–∏–±–æ –í–ú –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ MicroK8S  

------

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫ –∑–∞–¥–∞–Ω–∏—é

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MicroK8S:
    - sudo apt update,
    - sudo apt install snapd,
    - sudo snap install microk8s --classic,
    - –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É `sudo usermod -a -G microk8s $USER`,
    - –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π `sudo chown -f -R $USER ~/.kube`.

2. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
    - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å `microk8s status --wait-ready`;
    - –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ microK8s –∏ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `microk8s command`, –Ω–∞–ø—Ä–∏–º–µ—Ä, `microk8s kubectl get nodes`;
    - –≤–∫–ª—é—á–∏—Ç—å addon –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `microk8s enable`; 
    - —Å–ø–∏—Å–æ–∫ addon `microk8s status`;
    - –≤—ã–≤–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `microk8s config`;
    - –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ `microk8s kubectl port-forward -n kube-system service/kubernetes-dashboard 10443:443`.

3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
    - –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª /var/snap/microk8s/current/certs/csr.conf.template
    ```shell
    # [ alt_names ]
    # Add
    # IP.4 = 123.45.67.89
    ```
    - –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã `sudo microk8s refresh-certs --cert front-proxy-client.crt`.

4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ kubectl:
    - curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl;
    - chmod +x ./kubectl;
    - sudo mv ./kubectl /usr/local/bin/kubectl;
    - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é `bash source <(kubectl completion bash)`;
    - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥–Ω—É—é –æ–±–æ–ª–æ—á–∫—É bash `echo "source <(kubectl completion bash)" >> ~/.bashrc`.

------

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è

1. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](https://microk8s.io/docs/getting-started) –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ MicroK8S.
2. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](https://kubernetes.io/ru/docs/reference/kubectl/cheatsheet/#bash) –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è **kubectl**.
3. [–®–ø–∞—Ä–≥–∞–ª–∫–∞](https://kubernetes.io/ru/docs/reference/kubectl/cheatsheet/) –ø–æ **kubectl**.

------

### –ó–∞–¥–∞–Ω–∏–µ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MicroK8S

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MicroK8S –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∏–ª–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.
```
$ microk8s version
MicroK8s v1.26.3 revision 4959
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dashboard.
```
$ microk8s enable dashboard
....

$ microk8s status -a dashboard
enabled
```
3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–º—É ip-–∞–¥—Ä–µ—Å—É.
```
$ sudo microk8s refresh-certs --cert front-proxy-client.crt
[sudo] –ø–∞—Ä–æ–ª—å –¥–ª—è somov: 
Taking a backup of the current certificates under /var/snap/microk8s/4959/certs-backup/
Creating new certificates
Signature ok
subject=CN = front-proxy-client
Getting CA Private Key
Restarting service kubelite.
```
–î–∞–ª–µ–µ –æ—à–∏–±–∫–∞ –æ —Ç–æ–º, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞—Ä–µ–ª x509...—Ö–æ—Ç—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑, —Ç–∞–∫ –ø–æ–±–æ—Ä–æ—Ç—å –µ—ë –∏ –Ω–µ —Å–º–æ–≥.
–ü—Ä–æ–≤–µ—Ä—è–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –¥–µ–π—Å—Ç–≤—É—é—Ç –µ—â–µ 365 –¥–Ω–µ–π, –∞ –æ—à–∏–±–∫–∞ —Ç–∞–∫ –∏ –æ—Å—Ç–∞–ª–∞—Å—å.
–†–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –ü–û —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±—É–¥—É—Ç –ª–∏ —Ç–∞–º —Ç–∞–∫–∏–µ –æ—à–∏–±–∫–∏, –≤–∑—è–ª minikube –Ω–∞ –≤–æ–æ—Ä—É–∂–µ–Ω–∏–µ.
–ò –æ —á—É–¥–æ! –í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–æ–º, –∏ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º!

–í–µ—Ä—Å–∏—è
```
$ minikube version
minikube version: v1.30.1
commit: 08896fd1dc362c097c925146c4a0d0dac715ace0
```

–í–∫–ª—é—á–µ–Ω–∏–µ dashboard
```
minikube dashboard
üîå  Enabling dashboard ...
```

------

### –ó–∞–¥–∞–Ω–∏–µ 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ kubectl
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É kubectl.
```
kubectl version --output=json
{
  "clientVersion": {
    "major": "1",
    "minor": "27",
    "gitVersion": "v1.27.1",
    "gitCommit": "4c9411232e10168d7b050c49a1b59f6df9d7ea4b",
    "gitTreeState": "clean",
    "buildDate": "2023-04-14T13:21:19Z",
    "goVersion": "go1.20.3",
    "compiler": "gc",
    "platform": "linux/amd64"
  },
  "kustomizeVersion": "v5.0.1"
}
```
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É.
–í minikube –∞–≤—Ç–æ–º–∞—Ç–æ–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –¥–∞—à–±–æ—Ä–¥—É —Å –ø–æ–º–æ—â—å—é port-forward.
–û—à–∏–±–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å —É—Å—Ç–∞—Ä–µ–Ω–∏–µ–º....
```
microk8s kubectl port-forward -n kube-system service/kubernetes-dashboard 10443:443
microk8s kubectl port-forward -n kube-system service/kubernetes-dashboard 8080:443
```

–ê –≤–æ—Ç minikube —Å—Ä–∞–∑—É –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã, –º–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –∏–∑–≤–Ω–µ, —Å—Å—ã–ª–∫–∞ –≤–æ—Ç —Ç–∞–∫–∞—è
```
http://127.0.0.1:34069/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/workloads?namespace=default
```

------

### –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏—ë–º–∞ —Ä–∞–±–æ—Ç—ã

1. –î–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤ —Å–≤–æ—ë–º Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ —Ñ–∞–π–ª–µ README.md. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–∏—à–ª–∏—Ç–µ —Å—Å—ã–ª–∫–æ–π –Ω–∞ .md-—Ñ–∞–π–ª –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
2. –§–∞–π–ª README.md –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥ `kubectl get nodes` –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–∞—à–±–æ—Ä–¥–∞.

### –†–µ—à–µ–Ω–∏–µ
Dashboard: ![Dashboard](src/1.png)

```
$ kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   18m   v1.26.3
```

------

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏
–ó–∞—á—ë—Ç ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è, –æ—Ç–≤–µ—Ç—ã –¥–∞–Ω—ã –≤ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–π —Ñ–æ—Ä–º–µ, –ø—Ä–∏–ª–æ–∂–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞, –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è—Ö –Ω–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏.

–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É ‚Äî –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –≤ –ª–æ–≥–∏–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π –µ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è, —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.
