# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Основная часть

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информация о сбое: 

* [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/);
* [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

| Краткое описание инцидента | Были затронуты внутренние системы, из-за чего показывались старые данные 24 часа 11 минут вне зависимости от обновлений                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Предшествующие события     | Замена вышедшего из строя оптического оборудования между двумя центрами на восточном побережье США                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Причина инцидента          | Потеря связи между двумя центрами на 43 секунды                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Воздействие                | Кратковременный сбой вызвал цепочку событий, как результат - ухудшение качества обслуживания на 24 часа 11 минут.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Обнаружение                | Системы мониторинга начали генерировать предупреждения, которые были замечены инженерами группы быстрого реагирования                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Реакция                    | Сайт был помещен сперва в желтый статус, а после координатором инцидента в красный. <br>Были вызваны дополнительные инженеры из группы разработки баз данных GitHub. <br>Предполагалось, что процесс восстановление займет 2 часа, но он длился 24 часа 11 минут.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Восстановление             | Был инициирован процесс резервного копирования для всех затронутых кластеров MySQL. По мере их восстановления, пользователям начинала отдаваться актуальная информация.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Таймлайн                   | 22:52 аварийное переключение кластеров<br>22:54 системы мониторинга начали генерировать предупреждения<br>23:07 Блокировка сайта в желтый и красный статусы<br>23:13 Вызвов дополнительных инженеров из группы разработки баз данных GitHub<br>23:19 Остановка выполнений заданий, записывающих метаданные о таких вещах, как push-уведомления<br>00:05 Разработка плана по устранению несоответствий данных и аварийного переключения для MySQL<br>00:41 Инициирован процесс резервного копирования для всех затронутых кластеров MySQL<br>06:51 Несколько кластеров завершили восстановление из резервных копий, и начали репликацию новых данных<br>07:46 Публикация статьи в блоге, чтобы предоставить больше контекста<br>11:12 Распределили нагрузку чтения по большому пулу реплик чтения<br>13:15 Начали предоставлять дополнительные реплики чтения MySQL<br>16:24 Выполнили аварийное переключение на исходную топологию<br>16:45 Приостановили обработку в очереди, и внесли изменение, чтобы на время увеличить этот TTL сообщений<br>23:03 Разблокировали сайт, выставили статус зеленый |
| Последующие действия       | 1) GitHub опубликовал статью в блоге, чтобы предоставить больше информации о случившемся инциденте. <br>2) Устранение несоответствия данных, автоматическое и вручную пользовательское. <br>3) Публичные извинения. <br>4) Выявлен ряд технических инициатив. <br>5) Внедрение системной практики проверок сценариев сбоев                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |